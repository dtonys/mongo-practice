{"version":3,"sources":["association_test.js"],"names":["before","t","after","always","beforeEach","joe","name","blogPost","title","content","comment","blogPosts","push","comments","user","context","Promise","all","save","serial","find","console","log","pass"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAMA,cAAKA,MAAL,CAAY,qBAAZ;AAAA,uDAAmC,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,kCAAgB,YAAhB,CAD2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKC,KAAL,CAAWC,MAAX,CAAkB,0BAAlB,4CAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACtC,sCADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA9C;;AAIA,cAAKC,UAAL,CAAgB,qBAAhB;AAAA,wDAAuC,kBAAOH,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BI,eAD+B,GACzB,mBAAS;AACnBC,oBAAM;AADa,aAAT,CADyB;AAI/BC,oBAJ+B,GAIpB,uBAAa;AAC5BC,qBAAO,qBADqB;AAE5BC,uBAAS;AAFmB,aAAb,CAJoB;AAQ/BC,mBAR+B,GAQrB,sBAAY;AAC1BD,uBAAS;AADiB,aAAZ,CARqB;;;AAYrCJ,gBAAIM,SAAJ,CAAcC,IAAd,CAAmBL,QAAnB;AACAA,qBAASM,QAAT,CAAkBD,IAAlB,CAAuBF,OAAvB;AACAA,oBAAQI,IAAR,GAAeT,GAAf;;AAEAJ,cAAEc,OAAF,CAAUV,GAAV,GAAgBA,GAAhB;AACAJ,cAAEc,OAAF,CAAUR,QAAV,GAAqBA,QAArB;AACAN,cAAEc,OAAF,CAAUL,OAAV,GAAoBA,OAApB;;AAlBqC;AAAA,mBAoB/BM,QAAQC,GAAR,CAAY,CAChBZ,IAAIa,IAAJ,EADgB,EAEhBX,SAASW,IAAT,EAFgB,EAGhBR,QAAQQ,IAAR,EAHgB,CAAZ,CApB+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;;AAAA;AAAA;AAAA;AAAA;;AA4BA,cAAKC,MAAL,CAAY,kCAAZ;AAAA,wDAAgD,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,eAAKmB,IAAL,CAAU,EAAEd,MAAM,KAAR,EAAV,CAD2B;;AAAA;AACxCQ,gBADwC;;AAE9CO,oBAAQC,GAAR,CAAYR,IAAZ;AACAb,cAAEsB,IAAF;;AAH8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhD;;AAAA;AAAA;AAAA;AAAA","file":"association_test.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nimport User from '../../src/user';\nimport Comment from '../../src/comment';\nimport BlogPost from '../../src/blogPost';\nimport {\n  mongooseConnect,\n  mongooseDisconnect,\n} from '../test_helper';\n\n\ntest.before('connect to database', async (t) => {\n  await mongooseConnect('users_test');\n});\n\ntest.after.always('disconnect from database', async () => {\n  await mongooseDisconnect();\n});\n\ntest.beforeEach('create associations', async (t) => {\n  const joe = new User({\n    name: 'Joe',\n  });\n  const blogPost = new BlogPost({\n    title: 'test blogPost title',\n    content: 'test blogPost content',\n  });\n  const comment = new Comment({\n    content: 'test Comment content',\n  });\n\n  joe.blogPosts.push(blogPost);\n  blogPost.comments.push(comment);\n  comment.user = joe;\n\n  t.context.joe = joe;\n  t.context.blogPost = blogPost;\n  t.context.comment = comment;\n\n  await Promise.all([\n    joe.save(),\n    blogPost.save(),\n    comment.save(),\n  ]);\n\n});\n\ntest.serial('get blogpost associated with joe', async (t) => {\n  const user = await User.find({ name: 'Joe' });\n  console.log(user);\n  t.pass();\n});\n\n\n\n\n\n\n\n"]}
{"version":3,"sources":["test_helper.js"],"names":["db","Mongoose","getConnectionString","connectionString","connect","useMongoClient","modelNames","name","model","schema","createMongoose","Promise","global"],"mappings":";;;;;;;;uDAKO;AAAA;;AAAA;AAAA;AAAA;AAAA;AACCA,cADD,GACM,IAAI,mBAASC,QAAb,EADN;AAAA;AAAA,mBAE0B,wBAAcC,mBAAd,EAF1B;;AAAA;AAECC,4BAFD;AAAA;AAAA,mBAGCH,GAAGI,OAAH,CAAWD,gBAAX,EAA6B;AACjCE,8BAAgB;AADiB,aAA7B,CAHD;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAML,6BAAmB,mBAASC,UAAT,EAAnB,uHAA0C;AAA/BC,kBAA+B;;AACxCP,iBAAGQ,KAAH,CAASD,IAAT,EAAe,mBAASC,KAAT,CAAeD,IAAf,EAAqBE,MAApC;AACD;AARI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,6CASET,EATF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeU,c;;;;;AALtB;;;;AACA;;;;AAEA;;;;;;AADA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B","file":"test_helper.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nmongoose.Promise = global.Promise;\nimport { MongoDBServer } from 'mongomem';\n\nexport async function createMongoose() {\n  const db = new mongoose.Mongoose();\n  const connectionString = await MongoDBServer.getConnectionString();\n  await db.connect(connectionString, {\n    useMongoClient: true,\n  });\n  for (const name of mongoose.modelNames()) {\n    db.model(name, mongoose.model(name).schema);\n  }\n  return db;\n}\n"]}
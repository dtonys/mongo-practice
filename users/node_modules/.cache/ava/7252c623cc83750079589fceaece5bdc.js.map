{"version":3,"sources":["test_helper.js"],"names":["createMongoose","Promise","global","db","Mongoose","connectionString","getConnectionString","connect","useMongoClient","name","modelNames","model","schema"],"mappings":";;;;;QAKsBA,c,GAAAA,c;;AALtB;;;;AACA;;;;AAEA;;;;AADA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;AAGO,eAAeD,cAAf,GAAgC;AACrC,QAAMG,KAAK,IAAI,mBAASC,QAAb,EAAX;AACA,QAAMC,mBAAmB,MAAM,wBAAcC,mBAAd,EAA/B;AACA,QAAMH,GAAGI,OAAH,CAAWF,gBAAX,EAA6B;AACjCG,oBAAgB;AADiB,GAA7B,CAAN;AAGA,OAAK,MAAMC,IAAX,IAAmB,mBAASC,UAAT,EAAnB,EAA0C;AACxCP,OAAGQ,KAAH,CAASF,IAAT,EAAe,mBAASE,KAAT,CAAeF,IAAf,EAAqBG,MAApC;AACD;AACD,SAAOT,EAAP;AACD","file":"test_helper.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nmongoose.Promise = global.Promise;\nimport { MongoDBServer } from 'mongomem';\n\nexport async function createMongoose() {\n  const db = new mongoose.Mongoose();\n  const connectionString = await MongoDBServer.getConnectionString();\n  await db.connect(connectionString, {\n    useMongoClient: true,\n  });\n  for (const name of mongoose.modelNames()) {\n    db.model(name, mongoose.model(name).schema);\n  }\n  return db;\n}\n"]}
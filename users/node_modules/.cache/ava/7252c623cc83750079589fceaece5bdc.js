'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createMongoose = createMongoose;

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

var _mongoose = require('mongoose');

var _mongoose2 = _interopRequireDefault(_mongoose);

var _mongomem = require('mongomem');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_mongoose2.default.Promise = global.Promise;
async function createMongoose() {
  const db = new _mongoose2.default.Mongoose();
  const connectionString = await _mongomem.MongoDBServer.getConnectionString();
  await db.connect(connectionString, {
    useMongoClient: true
  });
  for (const name of _mongoose2.default.modelNames()) {
    db.model(name, _mongoose2.default.model(name).schema);
  }
  return db;
}
//# sourceMappingURL=../node_modules/.cache/ava/7252c623cc83750079589fceaece5bdc.js.map
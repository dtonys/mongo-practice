{"version":3,"sources":["create_test.js"],"names":["before","t","after","always","beforeEach","serial","user_1","name","save","result","true","isNew","remove","connection","collections","users","drop","console","log"],"mappings":";;;;;AAAA;;;;AACA;;;;AACA;;AAKA;;;;;;;;AAEA,cAAKA,MAAL,CAAY,qBAAZ;AAAA,uDAAmC,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,kCAAgB,YAAhB,CAD2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKC,KAAL,CAAWC,MAAX,CAAkB,0BAAlB,4CAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACtC,sCADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA9C;;AAIA,cAAKC,UAAL,CAAgB,kBAAhB;;AAEA,cAAKC,MAAL,CAAY,oBAAZ;AAAA,wDAAkC,kBAAOJ,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAC1BK,kBAD0B,GACjB,mBAAS;AACtBC,oBAAM;AADgB,aAAT,CADiB;AAAA;AAAA;AAAA;AAAA,mBAKTD,OAAOE,IAAP,EALS;;AAAA;AAKxBC,kBALwB;;AAM9BR,cAAES,IAAF,uBAAQ,YAAC,kDAAOC,KAAR,yBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAuB,4CAAvB;AAN8B;AAAA,mBAOxBL,OAAOM,MAAP,EAPwB;;AAAA;AAAA;AAAA,mBAQxB,mBAASC,UAAT,CAAoBC,WAApB,CAAgCC,KAAhC,CAAsCC,IAAtC,EARwB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAW9BC,oBAAQC,GAAR,CAAY,OAAZ;AACAD,oBAAQC,GAAR;;AAZ8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlC;;AAAA;AAAA;AAAA;AAAA","file":"create_test.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nimport {\n  mongooseConnect,\n  mongooseDisconnect,\n  mongooseDropTestCollections,\n} from '../test_helper';\nimport User from '../../src/user';\n\ntest.before('connect to database', async (t) => {\n  await mongooseConnect('users_test');\n});\n\ntest.after.always('disconnect from database', async () => {\n  await mongooseDisconnect();\n});\n\ntest.beforeEach('drop test tables', mongooseDropTestCollections);\n\ntest.serial('Create a new user`', async (t) => {\n  const user_1 = new User({\n    name: 'user_1',\n  });\n  try {\n    const result = await user_1.save();\n    t.true( !user_1.isNew, 'user\\'s `isNew` flag is false after a save' );\n    await user_1.remove();\n    await mongoose.connection.collections.users.drop();\n  }\n  catch ( error ) {\n    console.log('error');\n    console.log(error);\n  }\n});\n\n"]}
{"version":3,"sources":["validation_test.js"],"names":["before","t","after","always","serial","user","name","undefined","validationResult","validateSync","message","errors","is"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAKA,cAAKA,MAAL,CAAY,qBAAZ;AAAA,uDAAmC,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,kCAAgB,YAAhB,CAD2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKC,KAAL,CAAWC,MAAX,CAAkB,0BAAlB,4CAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACtC,sCADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA9C;;AAIA,cAAKC,MAAL,CAAY,yBAAZ;AAAA,wDAAuC,kBAAOH,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC/BI,gBAD+B,GACxB,mBAAS,EAAEC,MAAMC,SAAR,EAAT,CADwB;AAE/BC,4BAF+B,GAEZH,KAAKI,YAAL,EAFY;AAG7BC,mBAH6B,GAGjBF,iBAAiBG,MAAjB,CAAwBL,IAHP,CAG7BI,OAH6B;;AAIrCT,cAAEW,EAAF,CAAMF,OAAN,EAAe,mBAAf,EAAoC,kDAApC;;AAJqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;;AAAA;AAAA;AAAA;AAAA;;AAOA,cAAKN,MAAL,CAAY,8CAAZ;AAAA,wDAA4D,kBAAOH,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACpDI,gBADoD,GAC7C,mBAAS,EAAEC,MAAM,IAAR,EAAT,CAD6C;AAEpDE,4BAFoD,GAEjCH,KAAKI,YAAL,EAFiC;AAGlDC,mBAHkD,GAGtCF,iBAAiBG,MAAjB,CAAwBL,IAHc,CAGlDI,OAHkD;;AAI1DT,cAAEW,EAAF,CACEF,OADF,EAEE,wCAFF,EAGE,wEAHF;;AAJ0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA5D;;AAAA;AAAA;AAAA;AAAA","file":"validation_test.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nimport User from '../../src/user';\nimport {\n  mongooseConnect,\n  mongooseDisconnect,\n} from '../test_helper';\n\ntest.before('connect to database', async (t) => {\n  await mongooseConnect('users_test');\n});\n\ntest.after.always('disconnect from database', async () => {\n  await mongooseDisconnect();\n});\n\ntest.serial('Make user name required', async (t) => {\n  const user = new User({ name: undefined });\n  const validationResult = user.validateSync();\n  const { message } = validationResult.errors.name;\n  t.is( message, 'Name is required.', 'A `Name is required` error message should appear' );\n});\n\ntest.serial('Requires user name to be longer than 2 chars', async (t) => {\n  const user = new User({ name: 'Al' });\n  const validationResult = user.validateSync();\n  const { message } = validationResult.errors.name;\n  t.is(\n    message,\n    'Name must be longer than 2 characters.',\n    'A `Name must be longer than 2 characters.` error message should appear',\n  );\n});"]}
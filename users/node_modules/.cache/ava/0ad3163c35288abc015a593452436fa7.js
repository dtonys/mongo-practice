'use strict';

var _tapeAsync = require('tape-async');

var _tapeAsync2 = _interopRequireDefault(_tapeAsync);

var _mongoose = require('mongoose');

var _mongoose2 = _interopRequireDefault(_mongoose);

var _user = require('../src/user');

var _user2 = _interopRequireDefault(_user);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _tapeAsync2.default)('Reading users out of the database', async assert => {

  await _mongoose2.default.connection.collections.users.drop();
  const joe = new _user2.default({ name: 'Joe' });
  await joe.save();

  assert.comment('query user by name, using `find`');
  const users = await _user2.default.find({ name: 'Joe' });

  assert.equal(users[0]._id.toString(), joe._id.toString(), 'the id of the created object is same as the one queried');

  assert.comment('query user by id, using `findOne`');
  const user = await _user2.default.findOne({ _id: joe._id });
  assert.equals(user.name, 'Joe', 'Joe user should have the name Joe');

  assert.end();
});
//# sourceMappingURL=../node_modules/.cache/ava/0ad3163c35288abc015a593452436fa7.js.map
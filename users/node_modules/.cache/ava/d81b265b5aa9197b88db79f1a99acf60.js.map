{"version":3,"sources":["create_test.js"],"names":["before","t","MongoDBServer","start","beforeEach","db","context","User","models","user_1","name","save","result","true","isNew"],"mappings":";;;;;AAAA;;;;AAEA;;;;;;AAIA,cAAKA,MAAL,CAAY,cAAZ;AAAA,uDAA4B,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACpBC,cAAcC,KAAd,EADoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA5B;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKC,UAAL,CAAgB,4BAAhB;AAAA,wDAA8C,kBAAOH,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,kCAD2B;;AAAA;AACtCI,cADsC;;AAE5CJ,cAAEK,OAAF,CAAUD,EAAV,GAAeA,EAAf;;AAF4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9C;;AAAA;AAAA;AAAA;AAAA;;AAKA,mBAAK,oBAAL;AAAA,wDAA2B,kBAAOJ,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBI,cADiB,GACVJ,EAAEK,OADQ,CACjBD,EADiB;AAEnBE,gBAFmB,GAEZF,GAAGG,MAAH,CAAU,MAAV,CAFY;AAGnBC,kBAHmB,GAGV,IAAIF,IAAJ,CAAS;AACtBG,oBAAM;AADgB,aAAT,CAHU;AAAA;AAAA,mBAMJD,OAAOE,IAAP,EANI;;AAAA;AAMnBC,kBANmB;;AAOzBX,cAAEY,IAAF,uBAAQ,YAAC,kDAAOC,KAAR,yBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAuB,4CAAvB;;AAPyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAAA;AAAA;AAAA;AAAA","file":"create_test.js","sourcesContent":["import test from 'ava';\n\nimport {\n  createMongoose\n} from '../test_helper';\n\ntest.before('start server', async t => {\n  await MongoDBServer.start();\n})\n\ntest.beforeEach('create mongoose connection', async (t) => {\n  const db = await createMongoose();\n  t.context.db = db;\n});\n\ntest('Create a new user ', async (t) => {\n  const { db } = t.context;\n  const User = db.models['user'];\n  const user_1 = new User({\n    name: 'user_1',\n  });\n  const result = await user_1.save();\n  t.true( !user_1.isNew, 'user\\'s `isNew` flag is false after a save' );\n});\n"]}
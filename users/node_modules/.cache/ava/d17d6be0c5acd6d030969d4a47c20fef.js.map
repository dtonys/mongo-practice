{"version":3,"sources":["update_test.js"],"names":["t","find","allUsers","is","length","name","assertName","createUser","user_1","save","before","after","always","beforeEach","connection","collections","users","drop","serial","newUser","update","pass"],"mappings":";;;uDAeA,iBAA0BA,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACyB,eAAKC,IAAL,CAAU,EAAV,CADzB;;AAAA;AACQC,oBADR;;AAEEF,cAAEG,EAAF,CAAKD,SAASE,MAAd,EAAsB,CAAtB,EAAyB,sCAAzB;AACAJ,cAAEG,EAAF,CAAKD,SAAS,CAAT,EAAYG,IAAjB,EAAuB,MAAvB,EAA+B,sCAA/B;AAHF,6CAIS,IAJT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,U;;;;;AAff;;;;AACA;;;;AACA;;;;AACA;;;;;;AAKA,SAASC,UAAT,GAAsB;AACpB,MAAMC,SAAS,mBAAS;AACtBH,UAAM;AADgB,GAAT,CAAf;AAGA,SAAOG,OAAOC,IAAP,EAAP;AACD;;AASD,cAAKC,MAAL,CAAY,qBAAZ;AAAA,wDAAmC,kBAAOV,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC3B,kCAAgB,YAAhB,CAD2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKW,KAAL,CAAWC,MAAX,CAAkB,0BAAlB,4CAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACtC,sCADsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA9C;;AAIA,cAAKC,UAAL,CAAgB,kBAAhB;AAAA,wDAAoC,kBAAOb,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAE1B,mBAASc,UAAT,CAAoBC,WAApB,CAAgCC,KAAhC,CAAsCC,IAAtC,EAF0B;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApC;;AAAA;AAAA;AAAA;AAAA;AAKI;AALJ;;AAUA,cAAKC,MAAL,CAAY,yBAAZ;AAAA,wDAAuC,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACfO,YADe;;AAAA;AAC/BY,mBAD+B;AAAA;AAAA,mBAE/BA,QAAQC,MAAR,CAAe,EAAEf,MAAM,MAAR,EAAf,CAF+B;;AAAA;AAAA;AAAA,mBAG/BC,WAAWN,CAAX,CAH+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;;AAAA;AAAA;AAAA;AAAA;;AAMA,cAAKkB,MAAL,CAAY,kCAAZ;AAAA,wDAAgD,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AAC9CA,cAAEqB,IAAF;;AAD8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhD;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKH,MAAL,CAAY,uBAAZ;AAAA,wDAAqC,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AACnCA,cAAEqB,IAAF;;AADmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArC;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKH,MAAL,CAAY,iCAAZ;AAAA,wDAA+C,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AAC7CA,cAAEqB,IAAF;;AAD6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/C;;AAAA;AAAA;AAAA;AAAA;;AAIA,cAAKH,MAAL,CAAY,kCAAZ;AAAA,wDAAgD,kBAAOlB,CAAP;AAAA;AAAA;AAAA;AAAA;AAC9CA,cAAEqB,IAAF;;AAD8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhD;;AAAA;AAAA;AAAA;AAAA","file":"update_test.js","sourcesContent":["import test from 'ava';\nimport mongoose from 'mongoose';\nimport User from '../../src/user';\nimport {\n  mongooseConnect,\n  mongooseDisconnect,\n} from '../test_helper';\n\nfunction createUser() {\n  const user_1 = new User({\n    name: 'newUser',\n  });\n  return user_1.save();\n}\n\nasync function assertName(t) {\n  const allUsers = await User.find({});\n  t.is(allUsers.length, 1, 'only one user exists in the database');\n  t.is(allUsers[0].name, 'Alex', 'the user\\'s name is the updated name');\n  return true;\n}\n\ntest.before('connect to database', async (t) => {\n  await mongooseConnect('users_test');\n});\n\ntest.after.always('disconnect from database', async () => {\n  await mongooseDisconnect();\n});\n\ntest.beforeEach('drop users table', async (t) => {\n  try {\n    await mongoose.connection.collections.users.drop();\n  }\n  catch (err) {\n    // IGNORE EXCEPTION\n  }\n});\n\n\ntest.serial('model instance `update`', async (t) => {\n  const newUser = await createUser();\n  await newUser.update({ name: 'Alex' });\n  await assertName(t);\n});\n\ntest.serial('model instance `set` and `save` ', async (t) => {\n  t.pass();\n});\n\ntest.serial('model class `update` ', async (t) => {\n  t.pass();\n});\n\ntest.serial('model class `findOneAndUpdate` ', async (t) => {\n  t.pass();\n});\n\ntest.serial('model class `findByIdAndUpdate` ', async (t) => {\n  t.pass();\n});\n\n\n"]}